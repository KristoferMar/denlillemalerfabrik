{%- liquid
  assign combinations = shop.metaobjects['color_combination'].values
  assign heading = section.settings.heading
  assign subheading = section.settings.subheading
-%}

<div class="section-background color-{{ section.settings.color_scheme }}"></div>
<div
  class="
    section
    section--{{ section.settings.section_width }}
    color-{{ section.settings.color_scheme }}
    spacing-style
    gap-style
  "
  style="
    {% render 'spacing-style', settings: section.settings %}
    {% render 'gap-style', value: section.settings.gap %}
  "
>
  {%- if heading != blank or subheading != blank -%}
    <div class="kmeconsulting-color-lab__header">
      {%- if heading != blank -%}
        <h2 class="kmeconsulting-color-lab__heading">{{ heading }}</h2>
      {%- endif -%}
      {%- if subheading != blank -%}
        <p class="kmeconsulting-color-lab__subheading">{{ subheading }}</p>
      {%- endif -%}
    </div>
  {%- endif -%}

  {%- if combinations.size > 0 -%}
    <div class="kmeconsulting-color-lab__scroll">
      {%- for combo in combinations -%}
        <a href="{{ combo.system.url }}" class="kmeconsulting-color-lab__card" aria-label="{{ combo.name }}">
          <div class="kmeconsulting-color-lab__swatches">
            {%- if combo.color_1 != blank -%}
              <span class="kmeconsulting-color-lab__swatch" style="background-color: {{ combo.color_1 }};"></span>
            {%- endif -%}
            {%- if combo.color_2 != blank -%}
              <span class="kmeconsulting-color-lab__swatch" style="background-color: {{ combo.color_2 }};"></span>
            {%- endif -%}
            {%- if combo.color_3 != blank -%}
              <span class="kmeconsulting-color-lab__swatch" style="background-color: {{ combo.color_3 }};"></span>
            {%- endif -%}
            {%- if combo.color_4 != blank -%}
              <span class="kmeconsulting-color-lab__swatch" style="background-color: {{ combo.color_4 }};"></span>
            {%- endif -%}
            {%- if combo.color_5 != blank -%}
              <span class="kmeconsulting-color-lab__swatch" style="background-color: {{ combo.color_5 }};"></span>
            {%- endif -%}
          </div>
          {%- if combo.name != blank -%}
            <h3 class="kmeconsulting-color-lab__name">{{ combo.name }}</h3>
          {%- endif -%}
          {%- if combo.description != blank -%}
            <p class="kmeconsulting-color-lab__description">{{ combo.description }}</p>
          {%- endif -%}
        </a>
      {%- endfor -%}
    </div>
  {%- else -%}
    <p class="kmeconsulting-color-lab__empty">Ingen farvekombinationer tilf√∏jet endnu.</p>
  {%- endif -%}
</div>

{% stylesheet %}
  .kmeconsulting-color-lab__header {
    text-align: center;
  }

  .kmeconsulting-color-lab__heading {
    margin: 0;
  }

  .kmeconsulting-color-lab__subheading {
    margin: 4px 0 0;
    opacity: 0.7;
    font-size: 0.95rem;
  }

  .kmeconsulting-color-lab__scroll {
    display: flex;
    gap: 20px;
    overflow-x: auto;
    scroll-snap-type: x mandatory;
    -webkit-overflow-scrolling: touch;
    padding-bottom: 8px;
  }

  .kmeconsulting-color-lab__scroll::-webkit-scrollbar {
    height: 4px;
  }

  .kmeconsulting-color-lab__scroll::-webkit-scrollbar-track {
    background: rgba(0, 0, 0, 0.05);
    border-radius: 2px;
  }

  .kmeconsulting-color-lab__scroll::-webkit-scrollbar-thumb {
    background: rgba(0, 0, 0, 0.15);
    border-radius: 2px;
  }

  .kmeconsulting-color-lab__card {
    flex: 0 0 auto;
    width: 260px;
    scroll-snap-align: start;
    background: rgb(var(--color-background-rgb, 255 255 255));
    border: 1px solid rgba(0, 0, 0, 0.08);
    border-radius: 12px;
    padding: 24px;
    text-decoration: none;
    color: inherit;
    transition: transform 0.25s ease-out, box-shadow 0.25s ease-out;
    cursor: pointer;
  }

  .kmeconsulting-color-lab__card:hover {
    transform: translateY(-4px);
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.08);
  }

  .kmeconsulting-color-lab__swatches {
    display: flex;
    gap: 8px;
    margin-bottom: 16px;
  }

  .kmeconsulting-color-lab__swatch {
    flex: 1;
    aspect-ratio: 1;
    border-radius: 50%;
    border: 1px solid rgba(0, 0, 0, 0.1);
    min-width: 0;
  }

  .kmeconsulting-color-lab__name {
    font-size: 1rem;
    font-weight: 600;
    margin: 0;
    line-height: 1.3;
  }

  .kmeconsulting-color-lab__description {
    font-size: 0.8rem;
    margin: 4px 0 0;
    opacity: 0.65;
    line-height: 1.4;
  }

  .kmeconsulting-color-lab__empty {
    text-align: center;
    opacity: 0.5;
    font-size: 0.9rem;
  }

  @media screen and (max-width: 749px) {
    .kmeconsulting-color-lab__card {
      width: 220px;
      padding: 20px;
    }
  }
{% endstylesheet %}

{% schema %}
{
  "name": "Farvelab",
  "class": "kmeconsulting-color-lab",
  "disabled_on": {
    "groups": ["header", "footer"]
  },
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Overskrift",
      "default": "Farvelab"
    },
    {
      "type": "text",
      "id": "subheading",
      "label": "Underoverskrift",
      "default": "Udforsk farvekombinationer der passer perfekt sammen."
    },
    {
      "type": "header",
      "content": "Sektionslayout"
    },
    {
      "type": "select",
      "id": "section_width",
      "label": "Bredde",
      "options": [
        {
          "value": "page-width",
          "label": "Sidebredde"
        },
        {
          "value": "full-width",
          "label": "Fuld bredde"
        }
      ],
      "default": "page-width"
    },
    {
      "type": "range",
      "id": "gap",
      "label": "Mellemrum",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 28
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Farveskema",
      "default": "scheme-1"
    },
    {
      "type": "header",
      "content": "Padding"
    },
    {
      "type": "range",
      "id": "padding-block-start",
      "label": "Top",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 48
    },
    {
      "type": "range",
      "id": "padding-block-end",
      "label": "Bund",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 48
    }
  ],
  "presets": [
    {
      "name": "Farvelab",
      "category": "Farver"
    }
  ]
}
{% endschema %}
